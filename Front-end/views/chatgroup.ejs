<!DOCTYPE html>
<html>
<title>Grupos</title>
<style>
  body {
    background-color: #ecf0f1;
  }

  .navpos {
    margin-left: 90%;
  }

  #contentWrap {
    display: none;
    margin-left: -10%;
    width: 120%;
  }

  .error {
    color: red;
  }

  .whisper {
    color: gray;
    font-style: italic;
  }

  .width {
    width: 100%;
    margin-left: 24.1%;
    margin-top: 0.9%;
  }

  .color {
    background: #0f0c29;
    /* fallback for old browsers */
    background: -webkit-linear-gradient(to right, #24243e, #302b63, #0f0c29);
    /* Chrome 10-25, Safari 5.1-6 */
    background: linear-gradient(to right, #24243e, #302b63, #0f0c29);
    /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
  }

  .colorcheck {
    color: green;
  }

  .colorcancel {
    color: red;
  }

  .colormsg {
    color: chocolate
  }

  .gedf-wrapper {
    margin-top: 0.1rem;
  }

  .position {
    margin-top: -11.7%;
  }

  .mover {
    margin-left: 67%;
    margin-top: -43.2%;
    float: right;
    position: static;
  }

  .top {
    margin: 4%;
  }


  input-group.md-form.form-sm.form-1 input{
  border: 1px solid #bdbdbd;
  border-top-right-radius: 0.25rem;
  border-bottom-right-radius: 0.25rem;
}
.input-group.md-form.form-sm.form-2 input {
  border: 1px solid #bdbdbd;
  border-top-left-radius: 0.25rem;
  border-bottom-left-radius: 0.25rem;
}
.input-group.md-form.form-sm.form-2 input.red-border {
  border: 1px solid #ef9a9a;
}
.input-group.md-form.form-sm.form-2 input.lime-border {
  border: 1px solid #cddc39;
}
.input-group.md-form.form-sm.form-2 input.amber-border {
  border: 1px solid #ffca28;
}
</style>

<%include partials/_header %>

<head>
  <link rel="stylesheet" href="/css/main.css" />
  
  <!-- BOOTSWATCH COSMO THEME CDN -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/cosmo/bootstrap.min.css">
  <!-- FONT AWESOME -->
  <script defer src="https://use.fontawesome.com/releases/v5.0.9/js/all.js"
    integrity="sha384-8iPTk2s/jMVj81dnzb/iFR2sdA7u06vHJyyLlAd4snFpCl/SnyUjRrbdJsw1pGIl"
    crossorigin="anonymous"></script>

</head>




<div class="container p-4">
  <!-- Nombre -->
  <div id="nickWrap">
    <div class="row">
      <div class="col-md-4 mx-auto">
        <div class="card">
          <div class="card-header">
            <h3>Ingrese su nombre</h3>
          </div>
          <p id="nickError"></p>
          <div class="card-body">
            <form id="nickForm">
              <input id="nickname" type="text" class="form-control" autofocus />
              <input type="submit" class="btn btn-warning btn-block mt-2" />
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>







  <!-- CHAT  -->
  <div id="contentWrap">
    <div class="row">
      <div class="col-md-4">
        <div class="card">


          <tbody>
            <% for(var i=0;i<grupos.length;i++) { %>
            <!-- ENCABEZADO -->
            <div class="card-header bg-dark text-white">
              <h3>Grupo: <%=grupos[i].nombreGrupo%></h3>
            </div>
          </tbody>
          <% } %>

          <!-- CUERPO -->
          <div id="chat" class="card-body"></div>

          <!-- PIE -->
          <form id="message-form" class="card-footer">
            <div class="input-group">
              <input type="text" id="message" class="form-control" />
              <div class="input-group-append">
                <button class="btn btn-warning">
                  <i class="fas fa-location-arrow"></i> Enviar
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- USER -->
      <div class="col-md-3">
        <div class="card">
          <div class="card-header bg-dark text-white">
            <h3>Usuarios</h3>
          </div>
          <div class="card-body">
            <div id="usernames"></div>
          </div>
        </div>
      </div>


      <tbody>
        <div class="col-md-4 ">
          <div class="card ">
            <div class="card-header bg-dark text-white">
              <h3>Invitar usuarios</h3>
            </div>

            <form class="form-inline d-flex justify-content-center md-form form-sm active-purple active-purple-2 mt-2">
              <i class="fas fa-search" aria-hidden="true"></i>
               <input class="form-control-sm ml-3 w-75" type="text" id="buscar" onkeyup="buscar()" placeholder="Buscar..."
                title="Empieza a escribir para buscar">
            </form>

          <div class="card-body" id="tabla" data-sort="table">
            <% var i=0; %>
            <% for(var i=0;i<usuarios.length;i++) { %>
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
              data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <tr>
              <td><%=usuarios[i].email%></td>
            </tr>
      
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item">Invitar</a>
            </div>


          </tbody>
          <% }%>
    </div>



    <!-- SCRIPTS -->
    <script src="https://code.jquery.com/jquery-3.3.1.js"
      integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/main.js"></script>

    <script>/* W3 Example */
      function busqueda() {
        var input, filter, div, a, i;
        input = document.getElementById("buscar");
        filter = input.value.toUpperCase();
        table = document.getElementById("tabla");
        tr = table.getElementsByTagName("tr");
        for (i = 0; i < a.length; i++) {
          tr = tr[i].getElementsByTagName("td")[0];
          if (td) {
            if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
              tr[i].style.display = "";
            } else {
              tr[i].style.display = "none";
            }
          }
        }
      }

      function busquedaJQsimple() {
        var filtro = $("#buscar").val().toUpperCase();

        $("#tabla tbody tr").each(function () {
          texto = $(this).children("td:eq(0)").text().toUpperCase();

          if (texto.indexOf(filtro) < 0) {
            $(this).hide();
          } else {
            $(this).show();
          }


        });

      }

      function buscar() {

        var filtro = $("#buscar").val().toUpperCase();

        $("#tabla td").each(function () {
          var textoEnTd = $(this).text().toUpperCase();
          if (textoEnTd.indexOf(filtro) >= 0) {
            $(this).addClass("existe");
          } else {
            $(this).removeClass("existe");
          }
        })

        $("#tabla tbody tr").each(function () {
          if ($(this).children(".existe").length > 0) {
            $(this).show();
          } else {
            $(this).hide();
          }
        })

      }

      function busquedaJQmultiple() {
        var filtro = $("#buscar").val().toUpperCase();

        $("#tabla tbody tr").each(function () {

          $(this).children("td").each(function () {
            var texto = $(this).text().toUpperCase();

            if (texto.indexOf(filtro) < 0) {
              $(this).addClass("sin");
            } else {
              $(this).removeClass("sin");
            }
          });

          // nTds = la cantidad de <td> en el <tr> evaluado
          nTds = $(this).children("td").length
          // nTdsSin = la cantidad de <td> con la clase ".sin" en el <tr> evaluado
          nTdsSin = $(this).children(".sin").length

          if (nTdsSin == nTds) {
            //$(this).hide()
            $(this).addClass("noTiene");
          } else {
            //$(this).show()
            $(this).removeClass("noTiene");
          }

        });

      }


    </script>